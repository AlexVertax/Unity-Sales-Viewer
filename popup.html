<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Unity Publisher Dashboard</title>

<!-- Google Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --accent:#0077ff;  --border:#d0d4d9; --bg-card:#fff;
    --bg-head:#f1f3f6; --bg-zebra:#fafbfc; --bg-status:#f5f7fa;
    --text:#202124;    --muted:#5f6368;
  }

  html,body{margin:0;padding:0;font-family:"Inter",Arial,sans-serif;color:var(--text);width:760px;box-sizing:border-box}
  .card{padding:22px 24px 20px;border-radius:10px;background:var(--bg-card);box-shadow:0 2px 6px rgba(0,0,0,.08)}

  h1{margin:0 0 14px;font-size:22px;font-weight:600}

  .tabbar {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  gap: 0;
  margin-bottom: 14px;
  border-bottom: 1px solid var(--border);
}

.tabs-left {
  display: flex;
}

.buttons-right {
  display: flex;
  gap: 6px;
  margin-bottom: 15px;
}

.tab {
  all: unset;
  cursor: pointer;
  padding: 8px 22px 7px;
  font-size: 14px;
  color: #444;
  background: #e8eaed;
  border: 1px solid var(--border);
  border-bottom: none;
  border-radius: 10px 10px 0 0;
  position: relative;
  top: 1px;
  transition: background .15s;
}

.tab:hover {
  background: #dfe2e6;
}

.tab.active {
  background: var(--bg-card);
  color: var(--text);
  font-weight: 600;
}

#refreshBtn, #openPortalBtn {
  all: unset;
  padding: 6px 16px;
  background: var(--accent);
  color: #fff;
  border-radius: 26px;
  font-size: 13px;
  cursor: pointer;
  user-select: none;
  margin-bottom: 3px; /* align to tab bottom */
}

#refreshBtn:hover, #openPortalBtn:hover {
  background: #0066e0;
}

#refreshBtn:active, #openPortalBtn:active {
  background: #0057c2;
}


  /* ----- STATUS BOXES ----- */
  .status{display:flex; gap:16px; margin:10px 0 12px;}
  .zone{flex:1; text-align:center; padding:9px 14px; background:var(--bg-status);
        border:px solid var(--border); border-radius:8px; font-size:1.2em;}
  .status .value{font-weight:600}

/* ----- TABLE BOX ----- */
.table-box{max-height:400px; overflow-y:auto;}
table{width:100%; border-collapse:collapse; font-size:14px;}

/* sales & general table headers stay no-wrap */
thead th{background:var(--bg-head); font-weight:600; border-bottom:1px solid var(--border);
         padding:9px 10px; text-align:left; white-space:nowrap;}

/* sales & general table cells stay no-wrap by default */
tbody td{border-bottom:1px solid var(--border); padding:7px 10px; white-space:nowrap; color:var(--muted);}

/* ===== reviews-specific overrides ===== */
#reviewsTable {
    table-layout: fixed; 
    width: 100%;
  }

  /* Column widths + wrapping rules */
  #reviewsTable th:nth-child(1),
  #reviewsTable td:nth-child(1) { width: 17%; white-space: normal; }        /* Date */
  #reviewsTable th:nth-child(2),
  #reviewsTable td:nth-child(2) { width: 20%; white-space: normal; }        /* Asset */
  #reviewsTable th:nth-child(3),
  #reviewsTable td:nth-child(3) { width: 10%; white-space: nowrap; }        /* Rating */

  #reviewsTable th:nth-child(4),
  #reviewsTable td:nth-child(4) {                                         
    width: 20%;
    white-space: normal;     
    word-break: break-word;    
  }
  #reviewsTable th:nth-child(5),
  #reviewsTable td:nth-child(5) {
    width: 45%;
    white-space: normal;
    word-break: break-word;
  }


  /* Rounded popup window */
  html, body{border-radius:14px; overflow:hidden;}
  body{box-shadow:0 4px 14px rgba(0,0,0,.25);}
</style>
</head>

<body>
  <div class="card">

<!-- TAB BAR -->
<div class="tabbar">
  <div class="tabs-left">
    <button class="tab active" data-tab="sales">Sales</button>
    <button class="tab" data-tab="reviews">Reviews</button>
  </div>
  <div class="buttons-right">
    <button id="refreshBtn">Refresh</button>
    <button id="openPortalBtn">Unity Publisher Portal</button>
  </div>
</div>

    <!-- SALES PANEL -->
    <div class="status" data-panel="sales">
      <div class="zone">
        Gross (100%) :&nbsp;<span id="totalGross" class="value">–</span> $
      </div>
      <div class="zone">
        Revenue (70%) :&nbsp;<span id="totalRevenue" class="value">–</span> $
      </div>
    </div>
    <div class="table-box" data-panel="sales">
      <table id="salesTable">
        <thead>
          <tr>
            <th>Name</th><th>Price</th><th>Gross</th><th>Revenue</th>
            <th>Sales</th><th>Last<th>First</th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- REVIEWS PANEL -->
    <div class="table-box" data-panel="reviews" style="display:none;">
      <table id="reviewsTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Asset</th>
            <th>Rating</th>
            <th>Subject</th>
            <th>Review Text</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </div>

  <script src="popup.js"></script>
</body>
</html>
